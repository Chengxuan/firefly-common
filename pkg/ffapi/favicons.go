// Copyright Â© 2023 Kaleido, Inc.
//
// SPDX-License-Identifier: Apache-2.0
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

package ffapi

import (
	"encoding/base64"
	"net/http"
	"strings"
)

const (
	// TODO: need a real 16 px logo, the current content is 32 px
	ffLogo16b64 = `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`
	ffLogo32b64 = `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`
)

var ffLogo16, ffLogo32 []byte

func init() {
	ffLogo16, _ = base64.StdEncoding.DecodeString(ffLogo16b64)
	ffLogo32, _ = base64.StdEncoding.DecodeString(ffLogo32b64)
}

func favIcons(res http.ResponseWriter, req *http.Request) {
	res.Header().Set("content-type", "image/png")
	if strings.Contains(req.URL.Path, "16") {
		_, _ = res.Write(ffLogo16)
	} else {
		_, _ = res.Write(ffLogo32)
	}
}
